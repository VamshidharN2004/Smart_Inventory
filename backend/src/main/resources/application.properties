spring.application.name=inventory-service
cors.allowed-origin=${CORS_ALLOWED_ORIGIN:http://localhost:3000}

# Server Port (Cloud uses PORT, Local uses 8080)
# Database Configuration (PostgreSQL for Render)
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/new_inventory}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:password}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Console Configuration
# spring.h2.console.enabled=true
# spring.h2.console.path=/h2-console

# JPA / Hibernate
spring.jpa.show-sql=true
spring.jpa.hibernate.ddl-auto=update
# Ensure data.sql runs after Hibernate creates tables
spring.jpa.defer-datasource-initialization=true

# HikariCP Connection Pool Tuning (Critical for Cloud Free Tier)
# Prevents "Connection is closed" and "Connection timed out" errors
# Keep connections alive for less time than the server's timeout
spring.datasource.hikari.max-lifetime=240000
# Connection Timeout (30 seconds)
spring.datasource.hikari.connection-timeout=30000
# Keep pool small to avoid hitting connection limits
spring.datasource.hikari.maximum-pool-size=4
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.idle-timeout=120000
spring.datasource.hikari.auto-commit=true
# Allow app to start even if DB is sleeping (Crucial for Free Tier)
spring.datasource.hikari.initialization-fail-timeout=0

# Mail Configuration
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=YOUR_EMAIL@gmail.com
spring.mail.password=YOUR_APP_PASSWORD
spring.mail.properties.mail.smtp.auth=true

# Cloudinary Configuration
cloudinary.cloud_name=${CLOUDINARY_CLOUD_NAME:daihcn7mt}
cloudinary.api_key=${CLOUDINARY_API_KEY:769124531261959}
cloudinary.api_secret=${CLOUDINARY_API_SECRET:rYLHaA0AMs1xuuEItAOs9nH6-ms}
